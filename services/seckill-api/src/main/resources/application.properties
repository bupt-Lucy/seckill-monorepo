# 1. 服务端口与应用名
server.port=${SECKILL_API_PORT:8080}
spring.application.name=${SECKILL_APP_NAME:seckill-api}

# 2. Nacos 注册/发现
spring.cloud.nacos.discovery.server-addr=${NACOS_SERVER_ADDR:localhost:8848}
spring.cloud.nacos.discovery.ip=${NACOS_IP:localhost}

# 3. Redis 配置
spring.redis.host=${REDIS_HOST:localhost}
spring.redis.port=${REDIS_PORT:6379}

# 4. 关闭 DataSource 自动配置（seckill-api 仅依赖 Redis）
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# 5. Actuator / Metrics
management.endpoints.web.exposure.include=*
management.metrics.tags.application=${spring.application.name}

# ================ Cache (Caffeine / Redisson) ================
spring.cache.type=${SPRING_CACHE_TYPE:caffeine}
spring.cache.cache-names=product
spring.cache.caffeine.spec=${SPRING_CACHE_CAFFEINE_SPEC:maximumSize=500,expireAfterWrite=10m}

# Seckill properties (Redis prefixes + product catalog for Bloom filter)
seckill.product-ids=${SECKILL_PRODUCT_IDS:1}
seckill.bucket-count=${SECKILL_BUCKET_COUNT:10}
seckill.bucket-retry-count=${SECKILL_BUCKET_RETRY_COUNT:3}
