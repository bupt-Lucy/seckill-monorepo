# 1. 服务端口与应用名
server.port=${SECKILL_API_PORT:8080}
spring.application.name=${SECKILL_APP_NAME:seckill-api}

# 2. Nacos 注册/发现
spring.cloud.nacos.discovery.server-addr=${NACOS_SERVER_ADDR:localhost:8848}
spring.cloud.nacos.discovery.ip=${NACOS_IP:localhost}

# 3. Redis 配置
spring.redis.host=${REDIS_HOST:localhost}
spring.redis.port=${REDIS_PORT:6379}

# 4. 数据源配置（用于缓存回源）
spring.datasource.url=${SECKILL_DB_URL:jdbc:mysql://localhost:3306/seckill?useSSL=false&characterEncoding=utf8&serverTimezone=UTC}
spring.datasource.username=${SECKILL_DB_USERNAME:root}
spring.datasource.password=${SECKILL_DB_PASSWORD:root}
spring.jpa.hibernate.ddl-auto=${SECKILL_JPA_DDL_AUTO:none}
spring.jpa.open-in-view=false
spring.jpa.show-sql=${SECKILL_JPA_SHOW_SQL:false}

# 5. Actuator / Metrics
management.endpoints.web.exposure.include=*
management.metrics.tags.application=${spring.application.name}

# ================ Cache (Caffeine / Redis 三级缓存) ================
spring.cache.type=${SPRING_CACHE_TYPE:caffeine}

# Seckill properties (Redis prefixes + product catalog for Bloom filter)
seckill.product-ids=${SECKILL_PRODUCT_IDS:1}
seckill.bucket-count=${SECKILL_BUCKET_COUNT:10}
seckill.bucket-retry-count=${SECKILL_BUCKET_RETRY_COUNT:3}
seckill.cache-ttl-seconds=${SECKILL_CACHE_TTL_SECONDS:1800}
seckill.cache-ttl-jitter-seconds=${SECKILL_CACHE_TTL_JITTER_SECONDS:1800}
seckill.empty-cache-ttl-seconds=${SECKILL_EMPTY_CACHE_TTL_SECONDS:300}
seckill.cache-lock-key-prefix=${SECKILL_CACHE_LOCK_PREFIX:lock:product:}
seckill.cache-lock-wait-seconds=${SECKILL_CACHE_LOCK_WAIT_SECONDS:3}
seckill.cache-lock-lease-seconds=${SECKILL_CACHE_LOCK_LEASE_SECONDS:10}
seckill.local-cache-maximum-size=${SECKILL_LOCAL_CACHE_MAX_SIZE:512}
seckill.local-cache-expire-after-write-seconds=${SECKILL_LOCAL_CACHE_EXPIRE_SECONDS:60}

# seckill.catalog[0].id=1
# seckill.catalog[0].title=示例商品
# seckill.catalog[0].stock=500
